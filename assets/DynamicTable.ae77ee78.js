import{h as J}from"./moment.9709ab41.js";import{u as W}from"./FitsTableProHook.9a38731a.js";import{J as X,G as Z,t as v,Y as z,y as Q,aj as ee,M as m,K as s,L as B,O as r,T as u,X as ue,N as g,ab as j,Z as y,a0 as _,aa as k,P as R,a5 as le,U as ae,W as te}from"./clientConfigs.e860e5b4.js";import"./index.60b99fcd.js";const A=C=>(ae("data-v-a8228b0e"),C=C(),te(),C),oe=R(" \u83B7\u53D6\u6570\u636E "),re=R(" \u4FDD\u5B58 "),de=A(()=>g("i",{class:"vxe-icon-add"},null,-1)),se=A(()=>g("span",{class:"redStar"},"*",-1)),ne=A(()=>g("i",{class:"vxe-icon-delete"},null,-1)),ie={class:"dataBox"},fe=Z({__name:"DynamicTable",setup(C){const c=v(),h=v([]),f=v({}),F=v(),T=v(),N={keepSource:!0,columns:[{field:"add",title:"\u64CD\u4F5C",width:80,slots:{default:"addDefault"}},{field:"project",title:"\u9879\u76EE",slots:{default:"projectDefault",header:"requiredHeader"}},{field:"batch",title:"\u6279\u6B21/\u8FED\u4EE3",slots:{default:"batchDefault",header:"requiredHeader"}},{field:"type",title:"\u5DE5\u65F6\u7C7B\u578B",slots:{default:"typeDefault"}},{field:"task",title:"\u4EFB\u52A1\u5185\u5BB9",slots:{default:"taskDefault",header:"requiredHeader"}},{field:"responsible",title:"\u8D23\u4EFB\u4EBA",slots:{default:"responsibleDefault",header:"requiredHeader"}},{field:"reviewer",title:"\u5DE5\u65F6\u5BA1\u6838\u4EBA",slots:{default:"reviewerDefault"}},{field:"startdate",title:"\u8BA1\u5212\u5F00\u59CB",slots:{default:"startdateDefault"}},{field:"enddate",title:"\u8BA1\u5212\u5B8C\u6210",slots:{default:"enddateDefault"}},{field:"delete",title:"\u64CD\u4F5C",width:80,slots:{default:"deleteDefault"}}],data:[{project:"",batch:"",type:"",task:"",responsible:"",reviewer:"",startdate:"",enddate:""},{project:"",batch:"",type:"",task:"",responsible:"",reviewer:"",startdate:"",enddate:""},{project:"",batch:"",type:"",task:"",responsible:"",reviewer:"",startdate:"",enddate:""}],align:"center",toolbarConfig:{slots:{buttons:"buttons"}},rowConfig:{keyField:"rowKey",useKey:!0},columnConfig:{useKey:!0}},b=v(),{fitsTablePro:Y}=W(N,b),K=v([{value:"\u4E30\u5FB7\u5F00\u53D1\u6846\u67B6\u9879\u76EE"},{value:"2019\u5E74\u9886\u5E8A\u8DEF\u5F84\u7CFB\u7EDF\u4E8C\u671F\u4EA7\u54C1"},{value:"2019\u5E74\u9886\u5E8A\u8DEF\u5F84\u7CFB\u7EDF\u4E00\u671F\u4EA7\u54C1"},{value:"\u5F00\u53D1\u7EC4"},{value:"2022\u5E74\u7279\u79CD\u673A\u7535\u8BBE\u5907\u68C0\u6D4B"},{value:"\u5065\u5EB7\u6863\u6848\u7CFB\u7EDF"},{value:"2021\u5E74\u8D44\u4EA7\u7BA1\u7406\u7CFB\u7EDF"},{value:"2023Vue\u5347\u7EA7"}]),I=(t,n)=>{const d=t?K.value.filter(p=>p.value.toLowerCase().indexOf(t)!==-1):K.value;n(d)},O=v([{label:".net core\u5F00\u539F\u6846\u67B6\u7814\u7A76",value:"0"},{label:"Fits Framework",value:"1"},{label:"PC\u540E\u53F0\u7BA1\u7406\u7F51\u7AD9",value:"2"},{label:"\u6DF7\u5408app-ionic5",value:"3"},{label:"\u8F85\u52A9\u5DE5\u5177",value:"4"},{label:"\u65B0PC\u524D\u7AEF\u6846\u67B6\u7814\u53D1",value:"5"}]),M=v([{label:"\u9879\u76EE\u7BA1\u7406",value:"0"},{label:"\u552E\u524D\u652F\u6301",value:"1"},{label:"\u9700\u6C42\u5206\u6790",value:"2"},{label:"\u7CFB\u7EDF\u8BBE\u8BA1",value:"3"},{label:"\u529F\u80FD\u5F00\u53D1",value:"4"}]),P=v([{label:"\u674E\u5C0F\u767D",value:"0"},{label:"\u738B\u8F89",value:"1"},{label:"\u5F20\u51B0\u51B0",value:"2"},{label:"\u674E\u840C\u840C",value:"3"},{label:"\u767D\u9759",value:"4"}]),D=z({project:[{required:!0,message:"\u8BF7\u9009\u62E9\u9879\u76EE",trigger:"change"}],task:[{required:!0,message:"\u8BF7\u8F93\u5165\u4EFB\u52A1\u5185\u5BB9",trigger:"change"}],batch:[{required:!0,message:"\u8BF7\u9009\u62E9\u6279\u6B21",trigger:"change"}],responsible:[{required:!0,message:"\u8BF7\u9009\u62E9\u8D23\u4EFB\u4EBA",trigger:"change"}],startdate:[{validator:U,type:"date",trigger:"change"}],enddate:[{validator:U,type:"date",trigger:"change"}]});function H(){b.value.fitsTablePro.insertAt({project:"",batch:"",type:"",task:"",responsible:"",reviewer:"",startdate:"",enddate:""},-1),h.value=b.value.fitsTablePro.getTableData().tableData}function S(t){b.value.fitsTablePro.remove(t),h.value=b.value.fitsTablePro.getTableData().tableData}function q(t,n){F.value=t.rowKey;const d="dateFormRef_"+t.rowKey+n.id;if(T.value=d,f.value[t.rowKey]===void 0?f.value[t.rowKey]={[n.field]:t[n.field]}:f.value[t.rowKey][n.field]=t[n.field],f.value[t.rowKey]&&f.value[t.rowKey].startdate!==void 0&&f.value[t.rowKey].enddate!==void 0){const p=d.split("_"),a=n.field==="startdate"?Number(p.slice(-1))+1:Number(p.slice(-1))-1,i=`dateFormRef_${t.rowKey}col_${a}`;c.value.refs[i].validate()}}function U(t,n,d,p,a){if(!f.value[F.value]||!n){d();return}if(f.value[F.value]&&f.value[F.value].startdate&&f.value[F.value].enddate)if(J(f.value[F.value].startdate).isBefore(f.value[F.value].enddate))d();else{const i=t.field==="startdate"?"\u4E0D\u5F97\u5927\u4E8E\u7ED3\u675F\u65F6\u95F4":"\u4E0D\u5F97\u5C0F\u4E8E\u5F00\u59CB\u65F6\u95F4";d(new Error(i))}else d()}function $(){h.value=b.value.fitsTablePro.getTableData().tableData}function w(){let t=0,n=0,d=0,p=0;for(let a in c.value.refs)a.indexOf("requiredFormRef_")!==-1&&c.value.refs[a]!==null&&n++,a.indexOf("dateFormRef_")!==-1&&c.value.refs[a]!==null&&p++;for(let a in c.value.refs)a.indexOf("requiredFormRef_")!==-1&&c.value.refs[a]!==null&&c.value.refs[a].validate((i,E)=>{i&&t++}),a.indexOf("dateFormRef_")!==-1&&c.value.refs[a]!==null&&c.value.refs[a].validate((i,E)=>{i&&(d++,t===n&&d===p&&le({message:"\u4FDD\u5B58\u6210\u529F",type:"success"}))})}return Q(()=>{c.value=ee()}),(t,n)=>{const d=m("el-button"),p=m("el-autocomplete"),a=m("el-form-item"),i=m("el-form"),E=m("el-option"),V=m("el-select"),G=m("el-input"),x=m("el-date-picker"),L=m("fits-table");return s(),B(y,null,[r(L,{option:ue(Y),ref_key:"xGrid",ref:b},{buttons:u(()=>[r(d,{onClick:$},{default:u(()=>[oe]),_:1}),r(d,{onClick:w},{default:u(()=>[re]),_:1})]),addDefault:u(()=>[r(d,{onClick:H},{default:u(()=>[de]),_:1})]),requiredHeader:u(({slotProps:{column:e}})=>[se,g("span",null,j(e.title),1)]),projectDefault:u(({slotProps:{row:e,column:l}})=>[(s(),_(i,{ref:"requiredFormRef_"+e.rowKey+l.id,model:e,rules:D,key:e.rowKey},{default:u(()=>[r(a,{prop:"project"},{default:u(()=>[r(p,{modelValue:e.project,"onUpdate:modelValue":o=>e.project=o,placeholder:"\u8BF7\u8F93\u5165","fetch-suggestions":I,clearable:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1032,["model","rules"]))]),batchDefault:u(({slotProps:{row:e,column:l}})=>[(s(),_(i,{ref:"requiredFormRef_"+e.rowKey+l.id,model:e,rules:D,key:e.rowKey},{default:u(()=>[r(a,{prop:"batch"},{default:u(()=>[r(V,{modelValue:e.batch,"onUpdate:modelValue":o=>e.batch=o},{default:u(()=>[(s(!0),B(y,null,k(O.value,o=>(s(),_(E,{key:o.value,label:o.label,value:o.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1032,["model","rules"]))]),typeDefault:u(({slotProps:{row:e}})=>[r(a,null,{default:u(()=>[r(V,{modelValue:e.type,"onUpdate:modelValue":l=>e.type=l},{default:u(()=>[(s(!0),B(y,null,k(M.value,l=>(s(),_(E,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),taskDefault:u(({slotProps:{row:e,column:l}})=>[(s(),_(i,{ref:"requiredFormRef_"+e.rowKey+l.id,model:e,rules:D,key:e.rowKey},{default:u(()=>[r(a,{prop:"task"},{default:u(()=>[r(G,{modelValue:e.task,"onUpdate:modelValue":o=>e.task=o},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1032,["model","rules"]))]),responsibleDefault:u(({slotProps:{row:e,column:l}})=>[(s(),_(i,{ref:"requiredFormRef_"+e.rowKey+l.id,model:e,rules:D,key:e.rowKey},{default:u(()=>[r(a,{prop:"responsible"},{default:u(()=>[r(V,{modelValue:e.responsible,"onUpdate:modelValue":o=>e.responsible=o},{default:u(()=>[(s(!0),B(y,null,k(P.value,o=>(s(),_(E,{key:o.value,label:o.label,value:o.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1032,["model","rules"]))]),reviewerDefault:u(({slotProps:{row:e}})=>[r(a,null,{default:u(()=>[r(V,{modelValue:e.reviewer,"onUpdate:modelValue":l=>e.reviewer=l},{default:u(()=>[(s(!0),B(y,null,k(P.value,l=>(s(),_(E,{key:l.value,label:l.label,value:l.value},null,8,["label","value"]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),startdateDefault:u(({slotProps:{row:e,column:l}})=>[(s(),_(i,{ref:"dateFormRef_"+e.rowKey+l.id,model:e,rules:D,key:e.rowKey},{default:u(()=>[r(a,{prop:"startdate"},{default:u(()=>[r(x,{modelValue:e.startdate,"onUpdate:modelValue":o=>e.startdate=o,"value-format":"YYYY-MM-DD",onChange:o=>q(e,l)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:2},1024)]),_:2},1032,["model","rules"]))]),enddateDefault:u(({slotProps:{row:e,column:l}})=>[(s(),_(i,{ref:"dateFormRef_"+e.rowKey+l.id,model:e,rules:D,key:e.rowKey},{default:u(()=>[r(a,{prop:"enddate"},{default:u(()=>[r(x,{modelValue:e.enddate,"onUpdate:modelValue":o=>e.enddate=o,"value-format":"YYYY-MM-DD",onChange:o=>q(e,l)},null,8,["modelValue","onUpdate:modelValue","onChange"])]),_:2},1024)]),_:2},1032,["model","rules"]))]),deleteDefault:u(({slotProps:{row:e}})=>[r(d,{onClick:l=>S(e)},{default:u(()=>[ne]),_:2},1032,["onClick"])]),_:1},8,["option"]),g("div",ie," \u8868\u683C\u6570\u636E\uFF1A "+j(h.value),1)],64)}}});var me=X(fe,[["__scopeId","data-v-a8228b0e"],["__file","DynamicTable.vue"]]);export{me as default};
